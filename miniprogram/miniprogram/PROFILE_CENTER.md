# 电费支付系统功能说明

## 系统概述
电费支付系统是一个现代化的微信小程序，提供电费查询、账单管理、个人信息管理和AI智能分析等功能。

## 首页设计 - 四大功能板块

### 🎨 界面设计特点
- **现代化UI**：采用渐变背景和毛玻璃效果
- **响应式布局**：适配不同屏幕尺寸
- **动画效果**：流畅的进入动画和交互反馈
- **视觉层次**：清晰的信息层级和视觉引导

### 📱 首页布局结构

#### 1. 顶部欢迎区域
- **欢迎卡片**：显示个性化问候和用户名
- **公告区域**：显示系统公告信息
- **渐变背景**：营造温馨的欢迎氛围

#### 2. 四大功能板块（2x2网格布局）

##### 🔵 账单查询板块
- **图标**：📊 蓝色主题
- **功能**：查看电费账单记录
- **描述**：查看电费账单记录
- **交互**：点击跳转到账单查询页面

##### 🟢 用电查询板块  
- **图标**：🔍 绿色主题
- **功能**：查询用电数据统计
- **描述**：查询用电数据统计
- **交互**：点击跳转到用电查询页面

##### 🟣 个人中心板块
- **图标**：👤 紫色主题
- **功能**：管理个人信息账户
- **描述**：管理个人信息账户
- **交互**：点击跳转到个人中心页面

##### 🔴 AI助手板块
- **图标**：🤖 红色主题
- **功能**：智能用电分析助手
- **描述**：智能用电分析助手
- **交互**：点击显示"功能开发中"提示

#### 3. 底部统计信息
- **智能用电**：⚡ 图标展示
- **费用管理**：💰 图标展示  
- **数据分析**：📈 图标展示

### 🎯 交互体验

#### 视觉反馈
- **悬停效果**：板块轻微上浮和缩放
- **点击动画**：箭头向右滑动
- **光效动画**：顶部光带从左到右扫过
- **进入动画**：依次淡入上升效果

#### 响应式设计
- **大屏适配**：更大的间距和字体
- **小屏优化**：紧凑的布局和图标
- **触摸友好**：合适的点击区域大小

## 功能模块详情

### 1. 账单查询模块 (`/pages/bill/bill`)
**功能说明**：查询和管理电费账单

**主要功能**：
- 账单列表查询
- 账单详情查看
- 账单状态跟踪
- 历史账单回顾

### 2. 用电查询模块 (`/pages/plusage/plusage`)
**功能说明**：查询用户的用电数据记录

**主要功能**：
- 用户ID输入和查询
- 用电数据列表显示
- 用电详情查看
- 下拉刷新功能
- 空数据状态提示

### 3. 个人中心模块 (`/pages/profile/profile`)
**功能说明**：用户个人信息和账户管理

**主要功能**：

#### 头像管理
- **头像显示**：显示用户头像或昵称首字母
- **头像上传**：点击头像区域可选择从相册或拍照上传
- **实时预览**：上传后立即显示新头像
- **编辑图标**：头像右下角显示相机图标，提示可编辑

#### 个人信息管理
- **用户昵称**：显示和编辑用户昵称
- **手机号码**：显示和编辑手机号码
- **邮箱地址**：显示和编辑邮箱地址
- **性别选择**：男/女单选按钮
- **保存功能**：保存个人信息到后端

#### 密码管理
- **旧密码**：输入当前密码进行验证
- **新密码**：设置新的登录密码
- **确认密码**：再次输入新密码确认
- **密码验证**：确保新密码至少6位，两次输入一致
- **修改功能**：提交密码修改请求

#### 账户管理
- **余额显示**：实时显示当前账户余额
- **余额刷新**：手动刷新账户余额
- **账户充值**：通过弹窗进行账户充值
- **添加账号**：创建新的账户记录

### 4. AI助手模块 (`/pages/ai/ai`)
**功能说明**：智能用电分析助手

**主要功能**：
- **智能对话**：与AI助手进行自然语言对话
- **用电分析**：分析用电数据和趋势
- **节能建议**：提供个性化的节能建议
- **异常预警**：检测用电异常情况
- **费用计算**：智能计算电费
- **快捷功能**：一键访问常用功能

**界面特点**：
- **聊天界面**：类似微信的对话界面
- **消息气泡**：用户和AI消息区分显示
- **加载动画**：AI思考时的动态效果
- **快捷建议**：预设常用问题快速提问
- **功能入口**：底部快捷功能按钮

**技术实现**：
- 支持真实AI接口和模拟AI响应
- 自动处理HTML格式的AI回复
- 智能滚动和消息管理
- 响应式设计适配不同屏幕

## 技术实现

### 前端技术栈
- **微信小程序原生开发**
- **WXML + WXSS + JavaScript**
- **模块化代码结构**
- **响应式设计**

### 核心特性
- **统一状态管理**：userStore管理用户信息
- **API接口集成**：与后端完全对接
- **错误处理机制**：统一的错误提示和处理
- **动画效果**：流畅的用户交互体验
- **图片上传**：支持头像上传和预览
- **AI智能对话**：支持真实和模拟AI响应

### 设计系统
- **色彩方案**：渐变主题色 + 功能色区分
- **字体层级**：标题、副标题、正文、说明文字
- **间距系统**：统一的间距规范
- **圆角设计**：现代化的圆角卡片设计
- **阴影效果**：层次感的阴影系统

## API接口

### 用户相关
- `GET /getInfo` - 获取用户信息
- `PUT /system/user/profile` - 更新用户信息
- `PUT /system/user/profile/updatePwd` - 修改密码
- `POST /system/user/profile/avatar` - 上传头像

### 账单相关
- `GET /PersonalPayments/Bill` - 查询账单数据

### 用电相关
- `GET /PersonalElectricityUsage/PersonalElectricityUsage` - 查询用电数据

### 账户相关
- `POST /PersonalPayments/PersonalAcount/selectPersonalAcount` - 查询账户余额
- `POST /PersonalPayments/PersonalAcount/rechargePersonalAcount` - 账户充值
- `POST /PersonalPayments/PersonalAcount/addPersonalAcount` - 添加账户

### AI相关
- `POST /ai/contact` - AI对话接口

### 系统相关
- `GET /system/notice/list` - 获取公告列表

## 使用指南

### 首页操作
1. **查看欢迎信息**：顶部显示个性化问候
2. **阅读公告**：查看系统最新公告
3. **选择功能**：点击四大板块进入相应功能
4. **查看统计**：底部了解系统特色功能

### 功能导航
- **账单查询** → 查看电费账单记录
- **用电查询** → 查询用电数据统计  
- **个人中心** → 管理个人信息账户
- **AI助手** → 智能用电分析助手

### AI助手使用
1. **进入AI页面**：从首页点击"AI助手"板块
2. **开始对话**：在输入框输入问题或点击建议问题
3. **查看回复**：AI会提供智能分析和建议
4. **快捷功能**：使用底部快捷按钮快速提问
5. **继续对话**：可以继续提问或深入讨论

## 注意事项

- 所有功能模块都是独立的，可以单独使用
- 用户信息通过userStore统一管理，避免重复请求
- 网络请求失败会显示相应的错误提示
- 操作成功后会自动刷新相关数据
- 头像上传支持jpg、png等常见图片格式
- 界面采用响应式设计，适配不同设备
- AI功能支持真实接口和模拟响应，确保功能可用性
- AI对话支持HTML格式，提供丰富的显示效果 